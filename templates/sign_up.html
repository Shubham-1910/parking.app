{% extends "index.html" %}

{% block title %}User Signup{% endblock %}

{% block content %}
 <section class="h-100 bg-dark">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col">
                <div class="card card-registration my-4">
                    <div class="row g-0">
                        <div class="col-xl-6 d-flex justify-content-center align-items-center">
                            <img src="https://media.istockphoto.com/id/1463546256/vector/concept-of-online-registration-sign-up-user-interface-registration-sign-up-woman-creates-new.webp?b=1&s=612x612&w=0&k=20&c=hTvPNXOQ_HqC_Mz1klIKJSf7ctZHBEiMMzqw7FFkjKc=
                            "
                                alt="Sample photo" class="img-fluid"
                                style="border-top-left-radius: .25rem; border-bottom-left-radius: .25rem;" />
                        </div>
                        <div class="col-xl-6">
                            <div class="card-body p-md-5 text-black">
                                <h3 class="mb-5 text-uppercase">{{ 'Edit User' if user else 'Student registration form' }}</h3>
 


                                <form action="{{ url_for('main.edit_user', id=user.id) if user else url_for('main.signup') }}" method="POST" onsubmit="return validatePassword()">
                                    <div class="row">
                                        {% for field in form_fields %}
                                        {% if not user or (user and field.name != 'confirm_password' and field.name != 'role') %}
                                        <div class="col-md-6 mb-4">
                                            <div data-mdb-input-init class="form-outline">
                                                <input
                                                    type="{{ field.type | default('text') }}"
                                                    id="{{ field.id }}"
                                                    name="{{ field.name }}"
                                                    class="form-control form-control-lg"
                                                    placeholder="{{ field.placeholder }}"
                                                    value="{{ user|getattr(field.name, '') if user else '' }}"
                                                    required
                                                />
                                                <label class="form-label" for="{{ field.id }}">{{ field.label }}</label>
                                            </div>
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-4">
                                            <select data-mdb-select-init class="form-select" id="state" name="state" required>
                                                <option value="" disabled selected>Select your state</option>
                                               
                                                {% for state in stateCityMap.keys() %}
                                                <option value="{{ state }}" {% if user and user.state == state %}selected{% endif %}>{{ state }}</option>
                                        
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-4">
                                            <select class="form-select" id="city" name="city" required>
                                     <option value="" disabled selected>Select your city</option>
                                         {% for cities in stateCityMap.values() %}
                                             {% for city in cities %}
                                                 <option value="{{ city }}" {% if user and user.city == city %}selected{% endif %}>{{ city }}</option>
                                             {% endfor %}
                                         {% endfor %}
                                     </select>
                                        </div>
                                    </div>

                                    <div class="d-flex justify-content-end pt-3">
                                        <button type="submit"  class="btn btn-warning btn-lg ms-2">{{ 'Update' if user else 'Submit' }}</button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
        
{% endblock %}



